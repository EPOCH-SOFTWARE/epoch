#!/bin/sh
# Get list of staged JS/TS files
FILES=$(git diff --cached --name-only --diff-filter=ACMR | grep -E '\.(js|jsx|ts|tsx)$')

if [ -n "$FILES" ]; then
    echo "ğŸ” Running ESLint on staged files..."
    npm run lint
    if [ $? -ne 0 ]; then
        echo "âŒ ESLint failed. Please fix the errors before committing."
        exit 1
    fi
    
    echo "âœ… ESLint passed!"
fi

# Run type checking
echo "ğŸ” Running TypeScript type checking..."
npm run type-check
if [ $? -ne 0 ]; then
    echo "âŒ TypeScript type checking failed. Please fix the errors before committing."
    exit 1
fi

echo "âœ… TypeScript type checking passed!"
echo "ğŸ‰ Pre-commit checks passed! Proceeding with commit..."
